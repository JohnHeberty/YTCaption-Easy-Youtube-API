# ===== CONFIGURAÇÃO DO SERVIÇO DE NORMALIZAÇÃO DE ÁUDIO =====
# Copie este arquivo para .env e ajuste os valores conforme necessário

# ===== APLICAÇÃO =====
APP_NAME=Audio Normalization Service
VERSION=2.0.0
ENVIRONMENT=development  # development, staging, production
DEBUG=false

# ===== SERVIDOR =====
HOST=0.0.0.0
PORT=8001
WORKERS=1  # Número de workers Uvicorn

# ===== REDIS/DATABASE =====
# Para Docker Compose: redis://redis:6379/0
# Para desenvolvimento local: redis://localhost:6379/0
# Para Redis remoto: redis://usuario:senha@host:porta/db
REDIS_URL=redis://localhost:6379/0
DATABASE__MIN_MEMORY_BYTES=52428800  # 50MB mínimo
DATABASE__MAX_CONNECTIONS=20
DATABASE__CONNECTION_TIMEOUT=5
DATABASE__RETRY_ATTEMPTS=5

# ===== CACHE =====
CACHE__TTL_HOURS=24  # 1-168 (7 dias máximo)
CACHE__CLEANUP_INTERVAL_MINUTES=30  # 5-1440
CACHE__MAX_CACHE_SIZE_MB=1024

# ===== PROCESSAMENTO DE ÁUDIO =====
PROCESSING__MAX_FILE_SIZE_MB=100  # 1-500MB
PROCESSING__MAX_DURATION_MINUTES=30  # 1-120 minutos
PROCESSING__MAX_CONCURRENT_JOBS=3  # Jobs simultâneos por worker
PROCESSING__JOB_TIMEOUT_MINUTES=30
PROCESSING__NOISE_REDUCTION_STRENGTH=0.8  # 0.1-1.0
PROCESSING__DEFAULT_SAMPLE_RATE=16000
PROCESSING__DEFAULT_BITRATE=64k

# ===== SEGURANÇA =====
SECURITY__RATE_LIMIT_REQUESTS=100  # Requests por minuto
SECURITY__RATE_LIMIT_WINDOW=60  # Janela em segundos
SECURITY__ENABLE_FILE_CONTENT_VALIDATION=true
SECURITY__ENABLE_VIRUS_SCAN=false  # Requer ClamAV
SECURITY__MAX_UPLOAD_ATTEMPTS=3
SECURITY__VALIDATE_AUDIO_HEADERS=true
SECURITY__CHECK_FILE_ENTROPY=true

# ===== MONITORAMENTO E OBSERVABILIDADE =====
MONITORING__ENABLE_PROMETHEUS=true
MONITORING__METRICS_PORT=9090
MONITORING__ENABLE_TRACING=true
MONITORING__JAEGER_ENDPOINT=  # Opcional: http://jaeger:14268/api/traces
MONITORING__LOG_CORRELATION_ID=true
MONITORING__STRUCTURED_LOGGING=true

# ===== DIRETÓRIOS =====
UPLOAD_DIR=./uploads
PROCESSED_DIR=./processed
TEMP_DIR=./temp
LOG_DIR=./logs
BACKUP_DIR=./backup

# ===== LOGGING =====
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json ou text
LOG_ROTATION=1 day  # 1 hour, 1 day, 1 week
LOG_RETENTION=30 days

# ===== CELERY (WORKER) =====
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TASK_TIME_LIMIT=1800  # 30 minutos
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=50

# ===== DOCKER ESPECÍFICO =====
# Descomente para uso com Docker Compose
# REDIS_URL=redis://redis:6379/0
# PYTHONPATH=/app
