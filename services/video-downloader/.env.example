# ===== CONFIGURAÇÃO DO SERVIÇO DE DOWNLOAD DE VÍDEO =====
# Copie este arquivo para .env e ajuste os valores conforme necessário

# ===== APLICAÇÃO =====
APP_NAME=Video Downloader Service
VERSION=2.0.0
ENVIRONMENT=development  # development, staging, production
DEBUG=false

# ===== SERVIDOR =====
HOST=0.0.0.0
PORT=8000
WORKERS=1  # Número de workers Uvicorn

# ===== REDIS/DATABASE =====
# Para Docker Compose: redis://redis:6379/0
# Para desenvolvimento local: redis://localhost:6379/0
# Para Redis remoto: redis://usuario:senha@host:porta/db
REDIS_URL=redis://localhost:6379/0
DATABASE__MIN_MEMORY_BYTES=52428800  # 50MB mínimo
DATABASE__MAX_CONNECTIONS=20
DATABASE__CONNECTION_TIMEOUT=5
DATABASE__RETRY_ATTEMPTS=5

# ===== CACHE =====
CACHE__TTL_HOURS=24  # 1-168 (7 dias máximo)
CACHE__CLEANUP_INTERVAL_MINUTES=30  # 5-1440
CACHE__MAX_CACHE_SIZE_GB=10
CACHE_DIR=./cache

# ===== PROCESSAMENTO =====
PROCESSING__MAX_CONCURRENT_DOWNLOADS=2
PROCESSING__JOB_TIMEOUT_MINUTES=30
PROCESSING__DEFAULT_QUALITY=best
PROCESSING__MAX_FILE_SIZE_GB=5
PROCESSING__MAX_DURATION_MINUTES=120

# ===== USER AGENT MANAGEMENT =====
UA_QUARANTINE_HOURS=48
UA_MAX_ERRORS=3
UA_ROTATION_ENABLED=true
UA_UPDATE_INTERVAL_HOURS=24

# ===== SEGURANÇA =====
SECURITY__RATE_LIMIT_REQUESTS=100  # Requests por minuto
SECURITY__RATE_LIMIT_WINDOW=60  # Janela em segundos
SECURITY__ENABLE_URL_VALIDATION=true
SECURITY__BLOCKED_DOMAINS=localhost,127.0.0.1,0.0.0.0
SECURITY__MAX_REDIRECTS=5

# ===== DIRETÓRIOS =====
CACHE_DIR=./cache
LOG_DIR=./logs
BACKUP_DIR=./backup

# ===== LOGGING =====
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json ou text
LOG_ROTATION=1 day  # 1 hour, 1 day, 1 week
LOG_RETENTION=30 days

# ===== DOWNLOAD SETTINGS =====
DEFAULT_QUALITY=best  # best, 720p, 480p, 360p, audio
MAX_CONCURRENT_DOWNLOADS=2
DOWNLOAD_TIMEOUT=300
RETRY_ATTEMPTS=3
RETRY_DELAY=5

# ===== CELERY (WORKER) =====
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TASK_TIME_LIMIT=1800  # 30 minutos
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=50
