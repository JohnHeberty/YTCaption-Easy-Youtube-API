# =========================
# Configurações da Aplicação
# =========================
APP_NAME=youtube-caption-orchestrator
APP_VERSION=1.0.0
ENVIRONMENT=development
DEBUG=false

# =========================
# Servidor
# =========================
HOST=0.0.0.0
DIVISOR=4
PORT=800${DIVISOR}
WORKERS=1

# =========================
# Redis
# =========================
REDIS_URL=redis://192.168.1.110:6379/${DIVISOR}

# =========================
# Cache e Jobs
# =========================
CACHE_TTL_HOURS=24
JOB_TIMEOUT_MINUTES=120

# =========================
# Limitações de Recursos
# =========================
MAX_FILE_SIZE_MB=2048

# =========================
# Logging
# =========================
LOG_LEVEL=INFO
LOG_DIR=./orchestrator/logs

# =========================
# Microserviços URLs (HTTPS com SSL self-signed)
# =========================
# Usando domínios com HTTPS (certificados SSL configurados)
# O orchestrator usa verify=False para aceitar certificados self-signed
# 
# Alternativa com IPs diretos (sem SSL):
# VIDEO_DOWNLOADER_URL=http://192.168.1.132:8001
# AUDIO_NORMALIZATION_URL=http://192.168.1.133:8002
# AUDIO_TRANSCRIBER_URL=http://192.168.1.203:8003
VIDEO_DOWNLOADER_URL=https://ytdownloader.loadstask.com/
AUDIO_NORMALIZATION_URL=https://ytnormlization.loadstask.com/
AUDIO_TRANSCRIBER_URL=https://yttranscriber.loadstask.com/

# =========================
# Timeouts dos Microserviços (aumentados para arquivos grandes)
# =========================
VIDEO_DOWNLOADER_TIMEOUT=7200       # 120 minutos (2 horas)
AUDIO_NORMALIZATION_TIMEOUT=7200    # 120 minutos (2 horas)
AUDIO_TRANSCRIBER_TIMEOUT=7200      # 120 minutos (2 horas)

# =========================
# Polling Adaptativo (otimizado para jobs longos)
# =========================
POLL_INTERVAL_INITIAL=2             # Polling inicial rápido
POLL_INTERVAL_MAX=10                # Polling máximo após várias tentativas  
MAX_POLL_ATTEMPTS=2160              # 120 min max (2160 attempts × 10s max = 6h)

# =========================
# Retry para Microserviços (configuração robusta)
# =========================
MICROSERVICE_MAX_RETRIES=5          # 5 tentativas por requisição
MICROSERVICE_RETRY_DELAY=5          # 5 segundos base para backoff exponencial

# =========================
# Circuit Breaker (proteção contra serviços com problema)
# =========================
CIRCUIT_BREAKER_MAX_FAILURES=10     # Máximo de falhas antes de abrir circuito
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=300 # 5 minutos para tentar novamente

# =========================
# Parâmetros Padrão dos Microserviços
# =========================
DEFAULT_LANGUAGE=pt
DEFAULT_REMOVE_NOISE=false
DEFAULT_CONVERT_MONO=true
DEFAULT_HIGHPASS_FILTER=false
DEFAULT_SAMPLE_RATE_16K=true
